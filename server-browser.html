<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>BattleBit</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">

        <style>
            ::-webkit-scrollbar {
                width: 10px;
            }

            ::-webkit-scrollbar-track {
                background: rgb(25,25,25); 
            }

            ::-webkit-scrollbar-thumb {
                background: #888; 
            }

            ::-webkit-scrollbar-thumb:hover {
                background: #555; 
            }

            body {
                background-color: rgb(25,25,25);
                padding: 0;
                margin: 0;
                height: 100vh;
                width: 100vw;
                color: white;
                overflow-x: hidden;
                font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            }

            main {
                padding: 2rem;
            }

            .nav-return {
                height: 100%;
                position: absolute;
                top: 0;
                justify-content: center;
                align-content: center;
                width: 5rem;
            }

            .nav-return > a {
                justify-content: center;
                align-items: center;
                text-align: center;
                display: flex;
                height: 100%;
                font-size: xx-large;
            }


            .main-nav-container {
                background-color: rgb(15,15,15);
                padding: 1rem 0;
                position: sticky;
                top: 0;
                z-index: 3;
            }

            .main-nav {
                display: flex;
                flex-direction: row;
                justify-content: center;
                width: 50%;
                margin: 0 auto;
            }

            .main-nav > h1 {
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                font-size: xx-large;
                margin: 0 0;
            }

            .main-nav-redirects-container {
                margin: 0 0;
                list-style: none;
                display: table;
            }

            .main-nav-redirects-container > li {
                vertical-align: middle;
                display: table-cell;
                float: left;
                height: 100%;
            }

            .main-nav-redirects-container > li > a {
                color: rgb(200,200,200);
                font-weight: 300;
                display: block;
                text-align: center;
                padding: 1rem 1rem;
            }

            .main-nav-redirects-container > li > a:hover {
                color: rgb(250,250,250);
            }

            a {
                color: inherit;
                text-decoration: inherit;
            }

            #server-browser {
                padding-bottom: 2rem;
                margin-top: 2rem;
                margin: 2rem auto;
            }

            .server-browser-header > * {
                margin: 0 0;
                margin-bottom: 1rem;
            }

            thead > tr > .server-info {
                width: 80%;
                text-align: left;
            }

            .player-count {
                white-space: nowrap;
                text-align: center;
                padding: 0 1rem;
                text-decoration: none;
            }

            .player-count:hover {
                text-decoration: underline;
                cursor: default;
            }

            .server-hz {
                border-right: 0;
                white-space: nowrap;
                width: 5%;
                text-align: center;
                padding: 0 1rem;
                text-decoration: none;
            }

            .server-hz:hover {
                text-decoration: underline;
                cursor: default;
            }

            .servers-list {
                align-self: flex-start;
                border-collapse: collapse;
                width: 75%;
            }

            .server-item {
                background-color: rgb(15,15,15);
            }

            .server-item > .server-info {
                display: flex;
                flex-direction: row;
            }

            .server {
                border-left: 0;
                width: 100%;
            }

            #server-details {
                display: flex;
                flex-direction: row;
                align-items: center;
                height: 24px;
                color: rgb(50,50,50);
                font-weight: 400;
                font-size: small;
            }

            #server-details > * {
                padding: 0.25rem;
            }

            .region-flag > img {
                height: 24px;
                margin: 0 auto;
            }

            .region-flag {
                height: 24px;
            }

            th {
                padding: 0.25rem;
                background-color: rgb(15,15,15);
            }

            td {
                padding: 0.25rem;
                border: 2px solid rgb(25,25,25);
            }

            .server-name {
                font-weight: 700;
            }

            .server-thumbnail {
                border-left: 0;
                border-right: 0;
            }

            .map-thumbnail {
                object-fit: cover;
                display: block;
                width: 45px;
                height: 45px;
            }

            .map-span {
                height: 45px;
                margin-right: 0.25rem;
            }

            #servers {
                margin-top: 0.25rem;
                display: flex;
                flex-direction: row;
            }

            aside {
                position: sticky;
                top: 7rem;
                align-self: flex-start;
                width: 22.5%;
                margin-left: 2.5%;
                float: right;
            }

            #aside-server-info > a {
                display: block;
                background-color: white;
                color: black;
                text-align: center;
                box-sizing: border-box;
                padding: 0.5rem;
                margin: 2rem 0;
                border: 0 solid;
                font-size: 1vh;
                font-weight: 700;
                width: 100%;
            }

            #aside-server-info > a:hover {
                cursor: pointer;
                background-color: rgb(200,200,200);
            }

            #apply {
                display: block;
                background-color: white;
                color: black;
                text-align: center;
                box-sizing: border-box;
                padding: 0.5rem;
                margin: 2rem 0;
                margin-top: 0;
                border: 0 solid;
                font-size: 1vh;
                font-weight: 700;
                width: 100%;
            }

            #apply:hover {
                cursor: pointer;
                background-color: rgb(200,200,200);
            }

            .quick-info {
                position: relative;
                margin-bottom: 2rem;
            }

            .quick-info-banner {
                width: 100%;
                margin-right: 0px;
            }

            .quick-info-server-name {
                position: absolute;
                left: 1rem;
                top: 1rem;
                font-weight: 200;
                font-size: large;
                color: rgb(200,200,200);
                mix-blend-mode: luminosity;
            }

            .quick-info-map-name {
                position: absolute;
                left: 1rem;
                bottom: 2.5rem;
                font-weight: 600;
                font-size: xx-large;
            }

            .quick-info-map-misc {
                position: absolute;
                left: 1rem;
                bottom: 1rem;
                font-weight: 200;
                font-size: large;
                color: rgb(200, 200, 200);
            }

            .more-info-container, .filter-container {
                box-sizing: border-box;
                background-color: rgb(15,15,15);
                width: 100%;
                padding: 1rem;
            }

            .more-info, .filters {
                border-collapse: collapse;
                width: 100%;
                height: 100%;
            }

            .more-info > tbody > tr > td, .filters > tbody > tr > td {
                border: 0px solid white;
                font-size: 1vh;
            }

            .server-info-key, .key {
                font-weight: 300;
                font-size: medium;
                color: rgb(200, 200, 200);
            }

            .server-info-value, .value {
                font-weight: 500;
                font-size: medium;
                color: rgb(250, 250, 250);
            }

            .float-left {
                float: left;
            }

            .float-right {
                float: right;
            }

            .server-full {
                background-color: rgb(35,25,25);
            }

            .server-text-full {
                color: rgb(150,150,150);
            }

            .block {
                display: block;
            }

            .aside-right {
                margin-right: 2.5%;
            }

            ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            ul > li {
                display: flex;
                align-items: center;
            }

            input[type="checkbox"] {
                width: 14px;
                height: 14px;
                border-radius: 0;
                outline: none;
                background-color: white;
            }

            input[type="checkbox"]:checked + label::before {
                background-color: black;
            }
            
            footer {
                color: rgb(35,35,35);
                padding: 1em;
                position: fixed;
                bottom: 0;
                left: 0;
                background-color: rgb(15,15,15);
                width: 100%;
            }

            footer > * {
                margin: 0;
            }
        </style>
    </head>
    <body>
        <main>
            <section class="main-nav-container">
                <div class="nav-return">
                    <a href="index.html">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#ffffff}</style><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/></svg>
                    </a>
                </div>
                <div class="main-nav">
                    <h1>SERVER BROWSER</h1>
                    <ol class="main-nav-redirects-container">
                    </ol>
                </div>
            </section>

            <section id="server-browser">
                <section id="servers">
                    <aside class="aside-right">
                        <div class="aside-filter" id="aside-filter">
                            <div id="apply">
                                APPLY
                            </div>
                            <div class="filter-container">
                                <table class="filters">
                                    <tbody>
                                        <tr>
                                            <td class="key block">Maps:</td>
                                            <td class="value block" id="">
                                                <ul id="maps-ul">
                                                    <li><input type="checkbox" id="Azagor" checked><label for="Azagor">AZAGOR</label></li>
                                                    <li><input type="checkbox" id="District" checked><label for="District">DISTRICT</label></li>
                                                    <li><input type="checkbox" id="Wakistan" checked><label for="Wakistan">WAKISTAN</label></li>
                                                    <li><input type="checkbox" id="Namak" checked><label for="Namak">NAMAK</label></li>
                                                    <li><input type="checkbox" id="Salhan" checked><label for="Salhan">SALHAN</label></li>
                                                    <li><input type="checkbox" id="MultuIslands" checked><label for="MultuIslands">MULTUISLANDS</label></li>
                                                    <li><input type="checkbox" id="SandySunset" checked><label for="SandySunset">SANDYSUNSET</label></li>
                                                    <li><input type="checkbox" id="Eduardovo" checked><label for="Eduardovo">EDUARDOVO</label></li>
                                                    <li><input type="checkbox" id="Dustydew" checked><label for="Dustydew">DUSTYDEW</label></li>
                                                    <li><input type="checkbox" id="WineParadise" checked><label for="WineParadise">WINEPARADISE</label></li>
                                                    <li><input type="checkbox" id="Lonovo" checked><label for="Lonovo">LONOVO</label></li>
                                                    <li><input type="checkbox" id="Construction" checked><label for="Construction">CONSTRUCTION</label></li>
                                                    <li><input type="checkbox" id="OilDunes" checked><label for="OilDunes">OILDUNES</label></li>
                                                    <li><input type="checkbox" id="Basra" checked><label for="Basra">BASRA</label></li>
                                                    <li><input type="checkbox" id="River" checked><label for="River">RIVER</label></li>
                                                    <li><input type="checkbox" id="Valley" checked><label for="Valley">VALLEY</label></li>
                                                    <li><input type="checkbox" id="Frugis" checked><label for="Frugis">FRUGIS</label></li>
                                                    <li><input type="checkbox" id="Isle" checked><label for="Isle">ISLE</label></li>
                                                    <li><input type="checkbox" id="TensaTown" checked><label for="TensaTown">TENSATOWN</label></li>
                                                </ul>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="key block">Map Sizes:</td>
                                            <td class="value block" id="">
                                                <ul id="mapsize-ul">
                                                    <li><input type="checkbox" id="Ultra" checked><label for="Ultra">Ultra</label></li>
                                                    <li><input type="checkbox" id="Big" checked><label for="Big">Big</label></li>
                                                    <li><input type="checkbox" id="Medium" checked><label for="Medium">Medium</label></li>
                                                </ul>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="key block">Regions:</td>
                                            <td class="value block" id="">
                                                <ul id="regions-ul">
                                                    <li><input type="checkbox" id="Australia_Central" checked><label for="Australia_Central">Australia_Central</label></li>
                                                    <li><input type="checkbox" id="America_Central" checked><label for="America_Central">America_Central</label></li>
                                                    <li><input type="checkbox" id="Europe_Central" checked><label for="Europe_Central">Europe_Central</label></li>
                                                    <li><input type="checkbox" id="Brazil_Central" checked><label for="Brazil_Central">Brazil_Central</label></li>
                                                    <li><input type="checkbox" id="Japan_Central" checked><label for="Japan_Central">Japan_Central</label></li>
                                                </ul>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="key block">Gamemodes:</td>
                                            <td class="value block" id="">
                                                <ul id="gamemodes-ul">
                                                    <li><input type="checkbox" id="CONQ" checked><label for="CONQ">CONQ</label></li>
                                                    <li><input type="checkbox" id="DOMI" checked><label for="DOMI">DOMI</label></li>
                                                    <li><input type="checkbox" id="FRONTLINE" checked><label for="FRONTLINE">FRONTLINE</label></li>
                                                    <li><input type="checkbox" id="RUSH" checked><label for="RUSH">RUSH</label></li>
                                                    <li><input type="checkbox" id="INFCONQ" checked><label for="INFCONQ">INFCONQ</label></li>
                                                    <li><input type="checkbox" id="CASHRUN" checked><label for="CASHRUN">CASHRUN</label></li>
                                                    <li><input type="checkbox" id="GunGameTeam" checked><label for="GunGameTeam">GUNGAMETEAM</label></li>
                                                </ul>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </aside>


                    <table class="servers-list">
                        <thead>
                            <tr>
                                <th class="server-info" colspan="2">
                                    NAME
                                </th>
                                <th class="player-count" id="player-count">
                                    <a>PLAYERS</a>
                                </th>
                                <th class="server-hz" id="tick-count">
                                    <a>TICK</a>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="servers-list-tbody">

                        </tbody>
                    </table>

                    <aside>
                        <div class="aside-server-info" id="aside-server-info" style="display: none;">
                            <div class="quick-info" id="quick-info">
                                <img class="quick-info-banner" id="quick-info-banner" src="">
                                <div class="quick-info-server-name" id="quick-info-server-name">N/A</div>
                                <div class="quick-info-map-name" id="quick-info-map-name">N/A</div>
                                <div class="quick-info-map-misc" id="quick-info-map-misc">
                                    <span id="quick-info-map-gamemode">N/A</span>
                                    |
                                    <span id="quick-info-map-size">N/A</span>
                                </div>
                            </div>
                            <div class="more-info-container">
                                <table class="more-info">
                                    <tbody>
                                        <tr>
                                            <td class="server-info-key">Players:</td>
                                            <td class="float-right server-info-value" id="Players">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="server-info-key">MaxPlayers:</td>
                                            <td class="float-right server-info-value" id="MaxPlayers">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="server-info-key">Queue:</td>
                                            <td class="float-right server-info-value" id="Queue">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="server-info-key">DayNight:</td>
                                            <td class="float-right server-info-value" id="DayNight">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="server-info-key">Region:</td>
                                            <td class="float-right server-info-value" id="Region">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="server-info-key">Tick:</td>
                                            <td class="float-right server-info-value" id="Tick">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="server-info-key">Official</td>
                                            <td class="float-right server-info-value" id="IsOfficial">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="server-info-key">Password:</td>
                                            <td class="float-right server-info-value" id="HasPassword">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="server-info-key">AntiCheat:</td>
                                            <td class="float-right server-info-value" id="AntiCheat">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="server-info-key">Build:</td>
                                            <td class="float-right server-info-value" id="Build">N/A</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <a id="more-info">
                                MORE INFO
                            </a>
                        </div>
                    </aside>
                </section>
            </section>

            <footer>
                <h4>Made by @lili2</h4>
            </footer>
        </main>

        <template id="server-item-template">
            <tr class="server-item">
                <td class="server-thumbnail">
                    <img class="map-thumbnail" src=""> 
                </td>
                <td class="server">
                    <div class="server-name">177-8V-12</div>
                    <div id="server-details">
                        <span class="region-flag">
                            <img src="">
                        </span>
                        <span class="map">WAKISTAN</span>
                        |
                        <span class="gamemode">DOMI</span>
                        |
                        <span class="anticheat">EAC</span>
                    </div>
                </td>
                <td class="player-count">
                    64 / 64 (2)
                </td>
                <td class="server-hz">
                    60
                </td>
            </tr>
        </template>

        <script>
            const UrlParams = new URLSearchParams(window.location.search)
            const Sort = UrlParams.get("sort") //players
            const Filter = UrlParams.get("filter") //null

            let width = screen.width;

            const ServerBrowser = document.getElementById("server-browser");
            ServerBrowser.style.width = width/2 + "px";

            const ServerListTBody = document.getElementById("servers-list-tbody")
            const ServerItemTemplate = document.getElementById("server-item-template");

            const AsideServerInfo = document.getElementById("aside-server-info")
            const QuickInfo = document.getElementById("quick-info")
            const QuickInfoBanner = document.getElementById("quick-info-banner")
            const QuickInfoServerName = document.getElementById("quick-info-server-name")
            const QuickInfoMapName = document.getElementById("quick-info-map-name")
            const QuickInfoMapGamemode = document.getElementById("quick-info-map-gamemode")
            const QuickInfoMapSize = document.getElementById("quick-info-map-size")

            const MoreInfoPlayers = document.getElementById("Players")
            const MoreInfoMaxPlayers = document.getElementById("MaxPlayers")
            const MoreInfoQueue = document.getElementById("Queue")
            const MoreInfoDayNight = document.getElementById("DayNight")
            const MoreInfoRegion = document.getElementById("Region")
            const MoreInfoTick = document.getElementById("Tick")
            const MoreInfoIsOfficial = document.getElementById("IsOfficial")
            const MoreInfoHasPassword = document.getElementById("HasPassword")
            const MoreInfoAntiCheat = document.getElementById("AntiCheat")
            const MoreInfoBuild = document.getElementById("Build")
            const MoreInfoButton = document.getElementById("more-info")

            var Selected = null;

            const PlayerCount = document.getElementById("player-count")

            PlayerCount.addEventListener("click", e => {
                const SortAppend = "?sort=players"
                const FilterAppend = Filter!==null ? "filter=" + Filter : ""
                const NewLocation = SortAppend + "&" + FilterAppend
                window.location.href = "server-browser.html" + NewLocation
            })

            const TickCount = document.getElementById("tick-count")

            TickCount.addEventListener("click", e => {
                const SortAppend = "?sort=tick"
                const FilterAppend = Filter!==null ? "filter=" + Filter : ""
                const NewLocation = SortAppend + "&" + FilterAppend
                window.location.href = "server-browser.html" + NewLocation
            })

            const Apply = document.getElementById("apply")

            Apply.addEventListener("click", e => {
                const RegionList = document.getElementById("regions-ul")
                const RegionCheckbox = RegionList.querySelectorAll("input")
                const MapSizesList = document.getElementById("mapsize-ul")  
                const MapSizesCheckbox = MapSizesList.querySelectorAll("input")
                const MapsList = document.getElementById("maps-ul")
                const MapsCheckbox = MapsList.querySelectorAll("input")
                const GamemodesList = document.getElementById("gamemodes-ul")
                const GamemodesCheckbox = GamemodesList.querySelectorAll("input")

                let RegionAppend = "region("
                let MapSizesAppend = "mapsize("
                let MapsAppend = "map("
                let GamemodesAppend = "gamemode("
                const SortAppend = "?sort=" + Sort

                RegionCheckbox.forEach(Checkbox => {
                    RegionAppend += Checkbox.checked ? Checkbox.id + "|" : ""
                })

                MapSizesCheckbox.forEach(Checkbox => {
                    MapSizesAppend += Checkbox.checked ? Checkbox.id + "|" : ""
                })

                MapsCheckbox.forEach(Checkbox => {
                    MapsAppend += Checkbox.checked ? Checkbox.id + "|" : ""
                })

                GamemodesCheckbox.forEach(Checkbox => {
                    GamemodesAppend += Checkbox.checked ? Checkbox.id + "|" : ""
                })

                const NewLocation = SortAppend + "&filter=" + RegionAppend + ")," + MapSizesAppend + ")," + MapsAppend + ")," + GamemodesAppend + "),"

                window.location.href = "server-browser.html" + NewLocation
            })

            if (Filter) {
                const FilterArray = Filter.split(",")

                FilterArray.forEach(FilterLooped => {
                    const FilterParams = FilterLooped.split(/[()]/);

                    if (FilterParams[0] === "region") {
                        const RegionsArray = FilterParams[1].split("|")
                        const RegionList = document.getElementById("regions-ul")
                        const RegionCheckbox = RegionList.querySelectorAll("input")

                        RegionCheckbox.forEach(Checkbox => {
                            Checkbox.checked = RegionsArray.includes(Checkbox.id) ? true : false
                        })
                    } else if (FilterParams[0] === "mapsize") {
                        const MapSizesArray = FilterParams[1].split("|")
                        const MapSizesList = document.getElementById("mapsize-ul")
                        const MapSizesCheckbox = MapSizesList.querySelectorAll("input")

                        MapSizesCheckbox.forEach(Checkbox => {
                            Checkbox.checked = MapSizesArray.includes(Checkbox.id) ? true : false
                        })
                    } else if (FilterParams[0] === "map") {
                        const MapsArray = FilterParams[1].split("|")
                        const MapsList = document.getElementById("maps-ul")
                        const MapsCheckbox = MapsList.querySelectorAll("input")

                        MapsCheckbox.forEach(Checkbox => {
                            Checkbox.checked = MapsArray.includes(Checkbox.id) ? true : false
                        })
                    } else if (FilterParams[0] === "gamemode") {
                        const GamemodesArray = FilterParams[1].split("|")
                        const GamemodesList = document.getElementById("gamemodes-ul")
                        const GamemodesCheckbox = GamemodesList.querySelectorAll("input")

                        GamemodesCheckbox.forEach(Checkbox => {
                            Checkbox.checked = GamemodesArray.includes(Checkbox.id) ? true : false
                        })
                    }
                })
            }


            async function GetIndexData() {
                const Data = await fetch("https://publicapi.battlebit.cloud/Servers/GetServerList")
                .then(response => response.json())
                .then(data => {
                    return data
                })

                return Data
            }

            function ClearRemovedServers(Data) {
                const ServerItems = document.querySelectorAll("tr.server-item")

                ServerItems.forEach(ServerItem => {
                    const APIMatch = Data.find(server => server.Name === ServerItem.id)

                    if (!APIMatch) {
                        ServerItem.remove()
                    }
                })
            }

            function RenderIndexData(data, FilterParam, SortParam) {
                if (FilterParam) {
                    const FilterArray = FilterParam.split(",")

                    FilterArray.forEach(FilterLooped => {
                        const FilterParams = FilterLooped.split(/[()]/);

                        if (FilterParams[0] === "region") {
                            const RegionsArray = FilterParams[1].split("|")
                            data = data.filter((element) => RegionsArray.includes(element.Region));
                        } else if (FilterParams[0] === "mapsize") {
                            const MapSizesArray = FilterParams[1].split("|")
                            data = data.filter((element) => MapSizesArray.includes(element.MapSize));
                        } else if (FilterParams[0] === "map") {
                            const MapsArray = FilterParams[1].split("|")
                            data = data.filter((element) => MapsArray.includes(element.Map));
                        } else if (FilterParams[0] === "gamemode") {
                            const GamemodesArray = FilterParams[1].split("|")
                            data = data.filter((element) => GamemodesArray.includes(element.Gamemode));
                        } else if (FilterParams[0] === "isOfficial") {
                            data = data.filter((element) => element.IsOfficial == true);
                        } else if (FilterParams[0] === "notOfficial") {
                            data = data.filter((element) => element.IsOfficial == false);
                        }
                    })
                }

                if (SortParam === "players") {
                    data.sort((a, b) => b.Players - a.Players)
                } else if (SortParam === "tick") {
                    data.sort((a, b) => b.Hz - a.Hz)
                }

                data.forEach(Server => {
                        let ServerItem = document.getElementById(Server.Name)
                        var Append = false
                        let IsFull = false

                        if (!ServerItem) {
                            Append = true
                            clone = ServerItemTemplate.content.cloneNode(true);
                            ServerItem = clone.querySelector("tr.server-item")
                            ServerItem.id = Server.Name

                            ServerItem.addEventListener("mouseenter", e => {
                                e.preventDefault();
                                
                                if (ServerItem !== Selected) {
                                    const Color = IsFull ? [30,20,20] : [10,10,10]

                                    ServerItem.style.backgroundColor = "rgb(" + Color[0] + "," + Color[1] + "," + Color[2] + ")"
                                }
                            })

                            ServerItem.addEventListener("mouseleave", e => {
                                e.preventDefault();

                                if (ServerItem !== Selected) {
                                    ServerItem.style.backgroundColor = ""
                                }
                            })

                            ServerItem.addEventListener("click", e => {
                                e.preventDefault();

                                if (Selected) {
                                    Selected.style.backgroundColor = "";
                                    Selected.querySelector('div.server-name').style.color = '';
                                    Selected.querySelector('td.player-count').style.color = '';
                                    Selected.querySelector('td.server-hz').style.color = '';
                                }

                                Selected = ServerItem;
                                Selected.style.backgroundColor = "rgb(225,225,225)";
                                Selected.querySelector('div.server-name').style.color = 'rgb(50,50,50)';
                                Selected.querySelector('td.player-count').style.color = 'rgb(50,50,50)';
                                Selected.querySelector('td.server-hz').style.color = 'rgb(50,50,50)';

                                UpdateAsideData(Server.Name)
                            })
                        }
                        
                        let td = ServerItem.querySelectorAll("td");

                        const serverThumbnail = td[0]
                        const serverDetailsContainer = td[1]
                        const serverPlayerCount = td[2]
                        const serverHz = td[3]

                        const ServerDetails = serverDetailsContainer.querySelector("div#server-details")

                        const MapThumbnail = serverThumbnail.querySelector("img.map-thumbnail")
                        const ServerName = serverDetailsContainer.querySelector("div.server-name")
                        const RegionFlagContainer = serverDetailsContainer.querySelector("span.region-flag")
                        const RegionFlag = RegionFlagContainer.querySelector("img")
                        const ServerMap = ServerDetails.querySelector("span.map")
                        const ServerGamemode = ServerDetails.querySelector("span.gamemode")
                        const ServerAnticheat = ServerDetails.querySelector("span.anticheat")

                        ServerName.innerText = Server.Name
                        ServerMap.innerText = Server.Map.toUpperCase()
                        ServerGamemode.innerText = Server.Gamemode.toUpperCase()
                        ServerAnticheat.innerText = Server.AntiCheat
                        serverPlayerCount.innerText = Server.Players + " / " + Server.MaxPlayers
                        if (Server.QueuePlayers > 0) {
                            serverPlayerCount.innerText += " (" + Server.QueuePlayers + ")"
                        }
                        serverHz.innerText = Server.Hz
                        MapThumbnail.src = "assets/map_thumbnails/" + Server.Map + ".png"
                        RegionFlag.src = "assets/flags/" + Server.Region + ".png"

                        if (Server.Players >= Server.MaxPlayers) {
                            IsFull = true
                            if (ServerItem == Selected) { return }

                            ServerItem.className = "server-full"
                            ServerItem.querySelector('div#server-details').className = "server-full-text"
                        }

                        if (Append == true) {
                            ServerListTBody.appendChild(clone);
                        }
                    })
            }
        

            async function GetAsideData(ServerName) {
                const Data = await fetch("https://publicapi.battlebit.cloud/Servers/GetServerList")                
                    .then(response => response.json())
                    .then(data => {
                        return data
                    })
                
                return Data.find(server => server.Name === ServerName)
            }

            function RenderAsideData(UpdatedServer) {
                let ServerItem = document.getElementById(UpdatedServer.Name)
                let td = ServerItem.querySelectorAll("td");

                const serverThumbnail = td[0]
                const serverDetailsContainer = td[1]
                const serverPlayerCount = td[2]
                const serverHz = td[3]

                const ServerDetails = serverDetailsContainer.querySelector("div#server-details")

                const MapThumbnail = serverThumbnail.querySelector("img.map-thumbnail")
                const ServerName = serverDetailsContainer.querySelector("div.server-name")
                const RegionFlagContainer = serverDetailsContainer.querySelector("span.region-flag")
                const RegionFlag = RegionFlagContainer.querySelector("img")
                const ServerMap = ServerDetails.querySelector("span.map")
                const ServerGamemode = ServerDetails.querySelector("span.gamemode")
                const ServerAnticheat = ServerDetails.querySelector("span.anticheat")

                AsideServerInfo.style.display = "block";
                QuickInfoBanner.src = "assets/map_thumbnails/" + UpdatedServer.Map + ".png"
                QuickInfoServerName.innerText = UpdatedServer.Name.toUpperCase()
                QuickInfoMapName.innerText = UpdatedServer.Map.toUpperCase()
                QuickInfoMapGamemode.innerText = UpdatedServer.Gamemode.toUpperCase()
                QuickInfoMapSize.innerText = UpdatedServer.MapSize.toUpperCase()

                MoreInfoPlayers.innerText = UpdatedServer.Players
                MoreInfoMaxPlayers.innerText = UpdatedServer.MaxPlayers
                MoreInfoQueue.innerText = UpdatedServer.QueuePlayers
                MoreInfoDayNight.innerText = UpdatedServer.DayNight
                MoreInfoRegion.innerText = UpdatedServer.Region
                MoreInfoTick.innerText = UpdatedServer.Hz
                MoreInfoIsOfficial.innerText = UpdatedServer.IsOfficial
                MoreInfoHasPassword.innerText = UpdatedServer.HasPassword 
                MoreInfoAntiCheat.innerText = UpdatedServer.AntiCheat
                MoreInfoBuild.innerText = UpdatedServer.Build

                MoreInfoButton.href = "server-info.html?serverName=" + UpdatedServer.Name
                
                ServerMap.innerText = UpdatedServer.Map.toUpperCase()
                ServerGamemode.innerText = UpdatedServer.Gamemode.toUpperCase()
                serverPlayerCount.innerText = UpdatedServer.Players + " / " + UpdatedServer.MaxPlayers
                if (UpdatedServer.QueuePlayers > 0) {
                    serverPlayerCount.innerText += " (" + UpdatedServer.QueuePlayers + ")"
                }
                MapThumbnail.src = "assets/map_thumbnails/" + UpdatedServer.Map + ".png"   
            }

            function UpdateIndexData() {
                GetIndexData().then(Data => {
                    ClearRemovedServers(Data)
                    RenderIndexData(Data, Filter, Sort)
                })
            }

            function UpdateAsideData() {
                if (!Selected) { return }
                GetAsideData(Selected.id).then(Data => {
                    RenderAsideData(Data)
                })
            }

            window.addEventListener('load', function () {
                var fetchInterval = 5000;
                UpdateIndexData()

                setInterval(UpdateIndexData, fetchInterval);
                setInterval(UpdateAsideData, fetchInterval);
            });
        </script>
    </body>
</html>
